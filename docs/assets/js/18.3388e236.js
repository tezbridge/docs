(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{235:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"tezbridge-crypto-lib-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tezbridge-crypto-lib-api","aria-hidden":"true"}},[t._v("#")]),t._v(" TezBridge crypto lib API")]),t._v(" "),a("h2",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i tezbridge-crypto\n")])])]),a("h2",{attrs:{id:"import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import","aria-hidden":"true"}},[t._v("#")]),t._v(" Import")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TBC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tezbridge-crypto/PsBabyM1'")]),t._v("\n")])])]),a("p",[t._v("To directly import "),a("code",[t._v("tezbridge-crypto/{procotol}")]),t._v(", you have to install 2 babel plugins which are "),a("code",[t._v("@babel/plugin-transform-runtime")]),t._v(" and "),a("code",[t._v("@babel/plugin-transform-flow-strip-types")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"api-reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-reference","aria-hidden":"true"}},[t._v("#")]),t._v(" API reference")]),t._v(" "),a("h3",{attrs:{id:"tbc-codec"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec","aria-hidden":"true"}},[t._v("#")]),t._v(" TBC.codec")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-fromhex-hex-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-fromhex-hex-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.fromHex(hex_str)")])]),t._v(" "),a("p",[t._v("Convert hex string to bytes.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-tohex-bytes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-tohex-bytes","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.toHex(bytes)")])]),t._v(" "),a("p",[t._v("Convert bytes to hex string.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-totzbytes-source-is-key-hash-false"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-totzbytes-source-is-key-hash-false","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.toTzBytes(source, is_key_hash = false)")])]),t._v(" "),a("p",[t._v("Convert key value to hex string with special prefix which is used in operation bytes.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-totzstrvalue-tz-bytes-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-totzstrvalue-tz-bytes-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.toTzStrValue(tz_bytes_str)")])]),t._v(" "),a("p",[t._v("Convert hex string with special prefix in operation bytes to normal key value.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-prefix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-prefix","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.prefix")])]),t._v(" "),a("p",[t._v("A prefix mapping for different Tezos data types.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-watermark"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-watermark","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.watermark")])]),t._v(" "),a("p",[t._v("Watermark mapping can be used in bytes from different places.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-bs58checkencode-input-bytes-prefix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bs58checkencode-input-bytes-prefix","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.bs58checkEncode(input_bytes, prefix)")])]),t._v(" "),a("p",[t._v("Encode bytes to string value by specific prefix")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-bs58checkdecode-input-str-prefix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bs58checkdecode-input-str-prefix","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.bs58checkDecode(input_str, prefix?)")])]),t._v(" "),a("p",[t._v("Decode key value to bytes by specific prefix or by autodetection.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-bs58checkprefixpick-input-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bs58checkprefixpick-input-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.bs58checkPrefixPick(input_str)")])]),t._v(" "),a("p",[t._v("Auto detect the prefix of a key value.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-getcontracthexkey-address"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-getcontracthexkey-address","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.getContractHexKey(address)")])]),t._v(" "),a("p",[t._v("Convert address value to special hex representation(eg: "),a("code",[t._v("3e/e2/31/36/6b/1336eb61419df8fc666056025929bf")]),t._v(")")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-bytesconcat-x-y"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bytesconcat-x-y","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.bytesConcat(x, y)")])]),t._v(" "),a("p",[t._v("Concat two bytes into one.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-encoderawbytes-input-micheline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-encoderawbytes-input-micheline","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.encodeRawBytes(input_micheline)")])]),t._v(" "),a("p",[t._v("Encode Micheline data into bytes string.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-decoderawbytes-input-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-decoderawbytes-input-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.decodeRawBytes(input_str)")])]),t._v(" "),a("p",[t._v("Decode bytes string to Micheline data.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-encodezarithint-decimal-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-encodezarithint-decimal-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.encodeZarithInt(decimal_str)")])]),t._v(" "),a("p",[t._v("Encode int decimal value to zarith bytes string.")]),t._v(" "),a("h4",{attrs:{id:"tbc-codec-encodezarithuint-decimal-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-encodezarithuint-decimal-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.codec.encodeZarithUInt(decimal_str)")])]),t._v(" "),a("p",[t._v("Encode uint decimal value to zarith bytes string.")]),t._v(" "),a("h3",{attrs:{id:"tbc-crypto"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto","aria-hidden":"true"}},[t._v("#")]),t._v(" TBC.crypto")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-encryptedbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-encryptedbox","aria-hidden":"true"}},[t._v("#")]),t._v(" TBC.crypto.EncryptedBox")]),t._v(" "),a("p",[t._v("This class can create an instance with encrypted key for each usage.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" box "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TBC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crypto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EncryptedBox")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("any_sk_str or "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("EncryptedBox_show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("_result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("encrypted_key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("encrypted_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reveal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("raw_key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("raw_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reveal the secret key string")]),t._v("\nbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("revealKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reveal a Key instance which can access the pk, pkh")]),t._v("\n")])])]),a("h4",{attrs:{id:"tbc-crypto-genmnemonic-strength"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-genmnemonic-strength","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.genMnemonic(strength?)")])]),t._v(" "),a("p",[t._v("Generate a mnemonic with specific strength(entropy-bit)")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-getkeyfromseed-seed-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getkeyfromseed-seed-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.getKeyFromSeed(seed_str)")])]),t._v(" "),a("p",[t._v("Get key pair from a seed value")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-getseedfromwords-words-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getseedfromwords-words-password","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.getSeedFromWords(words, password?)")])]),t._v(" "),a("p",[t._v("Get seed from mnemonic words with passwords")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-getkeyfromwords-words-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getkeyfromwords-words-password","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.getKeyFromWords(words, password?)")])]),t._v(" "),a("p",[t._v("Get key pair from mnemonic words with passwords")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-genrandomkey-scheme"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-genrandomkey-scheme","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.genRandomKey(scheme)")])]),t._v(" "),a("p",[t._v("Generate a new key.")]),t._v(" "),a("p",[t._v("scheme can only be: "),a("code",[t._v("ed25519")]),t._v(" | "),a("code",[t._v("secp256k1")]),t._v(" | "),a("code",[t._v("p256")])]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-genrandombytes-len"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-genrandombytes-len","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.genRandomBytes(len)")])]),t._v(" "),a("p",[t._v("Generate "),a("code",[t._v("len")]),t._v(" long bytes randomly.")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-decryptkey-encrypted-key-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-decryptkey-encrypted-key-password","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.decryptKey(encrypted_key, password)")])]),t._v(" "),a("p",[t._v("Decrypt key(prefix in edesk, spesk, p2esk) with password.")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-encryptkey-scheme-sk-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-encryptkey-scheme-sk-password","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.encryptKey(scheme, sk, password)")])]),t._v(" "),a("p",[t._v("Encrypt key with password.")]),t._v(" "),a("p",[t._v("scheme can only be: "),a("code",[t._v("ed25519")]),t._v(" | "),a("code",[t._v("secp256k1")]),t._v(" | "),a("code",[t._v("p256")])]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-getkeyfromsecretkey-sk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getkeyfromsecretkey-sk","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.getKeyFromSecretKey(sk)")])]),t._v(" "),a("p",[t._v("Get key pair from secret key.")]),t._v(" "),a("h4",{attrs:{id:"tbc-crypto-signoperation-operation-bytes-sk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-signoperation-operation-bytes-sk","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.crypto.signOperation(operation_bytes, sk)")])]),t._v(" "),a("p",[t._v("Sign operation bytes with secret key.")]),t._v(" "),a("h3",{attrs:{id:"tbc-localop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-localop","aria-hidden":"true"}},[t._v("#")]),t._v(" TBC.localop")]),t._v(" "),a("h4",{attrs:{id:"tbc-localop-forgeoperation-contents-branch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-localop-forgeoperation-contents-branch","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.localop.forgeOperation(contents, branch)")])]),t._v(" "),a("p",[t._v("Forge operation localy without RPC node")]),t._v(" "),a("h4",{attrs:{id:"tbc-localop-parseoperationbytes-bytes-str"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tbc-localop-parseoperationbytes-bytes-str","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("TBC.localop.parseOperationBytes(bytes_str)")])]),t._v(" "),a("p",[t._v("Parse operation bytes to Micheline.")])])},[],!1,null,null,null);e.default=r.exports}}]);