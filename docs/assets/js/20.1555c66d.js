(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{260:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"tezbridge-crypto-lib-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tezbridge-crypto-lib-api"}},[t._v("#")]),t._v(" TezBridge crypto lib API")]),t._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm i tezbridge-crypto\n")])])]),s("h2",{attrs:{id:"import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[t._v("#")]),t._v(" Import")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TBC")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tezbridge-crypto/PsBabyM1'")]),t._v("\n")])])]),s("p",[t._v("To directly import "),s("code",[t._v("tezbridge-crypto/{procotol}")]),t._v(", you have to install 2 babel plugins which are "),s("code",[t._v("@babel/plugin-transform-runtime")]),t._v(" and "),s("code",[t._v("@babel/plugin-transform-flow-strip-types")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"api-reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-reference"}},[t._v("#")]),t._v(" API reference")]),t._v(" "),s("h3",{attrs:{id:"tbc-codec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec"}},[t._v("#")]),t._v(" TBC.codec")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-fromhex-hex-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-fromhex-hex-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.fromHex(hex_str)")])]),t._v(" "),s("p",[t._v("Convert hex string to bytes.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-tohex-bytes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-tohex-bytes"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.toHex(bytes)")])]),t._v(" "),s("p",[t._v("Convert bytes to hex string.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-totzbytes-source-is-key-hash-false"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-totzbytes-source-is-key-hash-false"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.toTzBytes(source, is_key_hash = false)")])]),t._v(" "),s("p",[t._v("Convert key value to hex string with special prefix which is used in operation bytes.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-totzstrvalue-tz-bytes-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-totzstrvalue-tz-bytes-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.toTzStrValue(tz_bytes_str)")])]),t._v(" "),s("p",[t._v("Convert hex string with special prefix in operation bytes to normal key value.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-prefix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-prefix"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.prefix")])]),t._v(" "),s("p",[t._v("A prefix mapping for different Tezos data types.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-watermark"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-watermark"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.watermark")])]),t._v(" "),s("p",[t._v("Watermark mapping can be used in bytes from different places.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-bs58checkencode-input-bytes-prefix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bs58checkencode-input-bytes-prefix"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.bs58checkEncode(input_bytes, prefix)")])]),t._v(" "),s("p",[t._v("Encode bytes to string value by specific prefix")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-bs58checkdecode-input-str-prefix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bs58checkdecode-input-str-prefix"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.bs58checkDecode(input_str, prefix?)")])]),t._v(" "),s("p",[t._v("Decode key value to bytes by specific prefix or by autodetection.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-bs58checkprefixpick-input-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bs58checkprefixpick-input-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.bs58checkPrefixPick(input_str)")])]),t._v(" "),s("p",[t._v("Auto detect the prefix of a key value.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-getcontracthexkey-address"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-getcontracthexkey-address"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.getContractHexKey(address)")])]),t._v(" "),s("p",[t._v("Convert address value to special hex representation(eg: "),s("code",[t._v("3e/e2/31/36/6b/1336eb61419df8fc666056025929bf")]),t._v(")")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-bytesconcat-x-y"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-bytesconcat-x-y"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.bytesConcat(x, y)")])]),t._v(" "),s("p",[t._v("Concat two bytes into one.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-encoderawbytes-input-micheline"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-encoderawbytes-input-micheline"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.encodeRawBytes(input_micheline)")])]),t._v(" "),s("p",[t._v("Encode Micheline data into bytes string.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-decoderawbytes-input-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-decoderawbytes-input-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.decodeRawBytes(input_str)")])]),t._v(" "),s("p",[t._v("Decode bytes string to Micheline data.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-encodezarithint-decimal-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-encodezarithint-decimal-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.encodeZarithInt(decimal_str)")])]),t._v(" "),s("p",[t._v("Encode int decimal value to zarith bytes string.")]),t._v(" "),s("h4",{attrs:{id:"tbc-codec-encodezarithuint-decimal-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-codec-encodezarithuint-decimal-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.codec.encodeZarithUInt(decimal_str)")])]),t._v(" "),s("p",[t._v("Encode uint decimal value to zarith bytes string.")]),t._v(" "),s("h3",{attrs:{id:"tbc-crypto"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto"}},[t._v("#")]),t._v(" TBC.crypto")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-encryptedbox"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-encryptedbox"}},[t._v("#")]),t._v(" TBC.crypto.EncryptedBox")]),t._v(" "),s("p",[t._v("This class can create an instance with encrypted key for each usage.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" box "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TBC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crypto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EncryptedBox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("any_sk_str or "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("EncryptedBox_show")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("_result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("encrypted_key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("encrypted_key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reveal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("raw_key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("raw_key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reveal the secret key string")]),t._v("\nbox"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("revealKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reveal a Key instance which can access the pk, pkh")]),t._v("\n")])])]),s("h4",{attrs:{id:"tbc-crypto-genmnemonic-strength"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-genmnemonic-strength"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.genMnemonic(strength?)")])]),t._v(" "),s("p",[t._v("Generate a mnemonic with specific strength(entropy-bit)")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-getkeyfromseed-seed-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getkeyfromseed-seed-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.getKeyFromSeed(seed_str)")])]),t._v(" "),s("p",[t._v("Get key pair from a seed value")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-getseedfromwords-words-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getseedfromwords-words-password"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.getSeedFromWords(words, password?)")])]),t._v(" "),s("p",[t._v("Get seed from mnemonic words with passwords")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-getkeyfromwords-words-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getkeyfromwords-words-password"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.getKeyFromWords(words, password?)")])]),t._v(" "),s("p",[t._v("Get key pair from mnemonic words with passwords")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-genrandomkey-scheme"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-genrandomkey-scheme"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.genRandomKey(scheme)")])]),t._v(" "),s("p",[t._v("Generate a new key.")]),t._v(" "),s("p",[t._v("scheme can only be: "),s("code",[t._v("ed25519")]),t._v(" | "),s("code",[t._v("secp256k1")]),t._v(" | "),s("code",[t._v("p256")])]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-genrandombytes-len"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-genrandombytes-len"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.genRandomBytes(len)")])]),t._v(" "),s("p",[t._v("Generate "),s("code",[t._v("len")]),t._v(" long bytes randomly.")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-decryptkey-encrypted-key-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-decryptkey-encrypted-key-password"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.decryptKey(encrypted_key, password)")])]),t._v(" "),s("p",[t._v("Decrypt key(prefix in edesk, spesk, p2esk) with password.")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-encryptkey-scheme-sk-password"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-encryptkey-scheme-sk-password"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.encryptKey(scheme, sk, password)")])]),t._v(" "),s("p",[t._v("Encrypt key with password.")]),t._v(" "),s("p",[t._v("scheme can only be: "),s("code",[t._v("ed25519")]),t._v(" | "),s("code",[t._v("secp256k1")]),t._v(" | "),s("code",[t._v("p256")])]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-getkeyfromsecretkey-sk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-getkeyfromsecretkey-sk"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.getKeyFromSecretKey(sk)")])]),t._v(" "),s("p",[t._v("Get key pair from secret key.")]),t._v(" "),s("h4",{attrs:{id:"tbc-crypto-signoperation-operation-bytes-sk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-crypto-signoperation-operation-bytes-sk"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.crypto.signOperation(operation_bytes, sk)")])]),t._v(" "),s("p",[t._v("Sign operation bytes with secret key.")]),t._v(" "),s("h3",{attrs:{id:"tbc-localop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-localop"}},[t._v("#")]),t._v(" TBC.localop")]),t._v(" "),s("h4",{attrs:{id:"tbc-localop-forgeoperation-contents-branch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-localop-forgeoperation-contents-branch"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.localop.forgeOperation(contents, branch)")])]),t._v(" "),s("p",[t._v("Forge operation localy without RPC node")]),t._v(" "),s("h4",{attrs:{id:"tbc-localop-parseoperationbytes-bytes-str"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tbc-localop-parseoperationbytes-bytes-str"}},[t._v("#")]),t._v(" "),s("code",[t._v("TBC.localop.parseOperationBytes(bytes_str)")])]),t._v(" "),s("p",[t._v("Parse operation bytes to Micheline.")])])}),[],!1,null,null,null);e.default=r.exports}}]);