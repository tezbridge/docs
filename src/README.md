# Introduction
TezBridge is a connector between Tezos and DApps. It works on both desktop and mobile devices and, furthermore, users can run DApp on device A and sign operations on device B under local area network.

Since TezBridge is a pure web application, a modern web browser is the only software required.

## Community
Telegram channel: [https://t.me/tezbridge](https://t.me/tezbridge)

Riot.im channel: [https://riot.im/app/#/room/#tezbridge-dev:matrix.org](https://riot.im/app/#/room/#tezbridge-dev:matrix.org)

Slack channel: [https://tezos-dev.slack.com/messages/tezbridge/](https://tezos-dev.slack.com/messages/tezbridge/)

## Why do we need TezBridge?
1. No plugin or App installation is needed.
2. Same DApp experience across desktop computer and mobile devices.
3. Powerful tools for Tezos are included.

## What is TezBridge capable of?
### Key generation
People can generate all kinds of keys(ed25519/secp256k1/p256) supported in Tezos with passwords. The mnemonic generation supports Ledger compatible path derivation, which means you can generate the key before you buy the Ledger and later import it into the hardware.

### Key import
People can import all kinds of keys into the TezBridge(ed25519/secp256k1/p256/mnemonic/faucet). It also support path derivation when importing mnemonic. So it means if you accidentally lose your Ledger, you can directly access the wallet with no waiting.

### Local signer
It's something like MetaMask for Ethereum. The user unlocks a pre-stored manager and the local signer signs the operations requested by a DApp website. 

### Remote signer
In local area network(LAN), a user can sign requests from the DApp in other devices. There are several good parts about it:
1. You don't need to import your key everywhere. Just import your key on the TezBridge in your mobile, your key is able to sign any DApp's request from any browser in LAN.
2. You don't need to plug the Ledger everywhere. Let's assume you are the manager in the office and you need to authorize some OA DApp requests for routine. Then you can just plug the Ledger to your computer and sign data for your colleagues.

### Hardware signer
TezBridge currently supports Ledger with USB port. It can also be used as a remote signer like this.
```
DApp window <------->  TezBridge window A  <------>  TezBridge window B
                           as tunnel                        |
                                                     pluged with Ledger
```

## How TezBridge works
Tezbridge consists of two kinds of signers.

#### Local signer
```
               window.postMessage
DApp window  <-------------------->  TezBridge window 

In the same browser on one computer / mobile
```

#### Remote signer
```
             window.postMessage                           WebRTC
DApp window <------------------->  TezBridge window A  <---------->  TezBridge window B

The DApp window and TezBridge window A should be in the same browser.
The TezBridge window B can be in other browser or computer in the same LAN network.
```

## FAQ
Q: How does that JS lib find your wallet / how is it allowed to talk to the wallet (vs. javascript running on a random page that shouldn't be allowed to access the wallet) 

A: The DApp will open a new window acessing TezBridge. They make communication though `postMessage` and `window.addEventListener('message', fn)`. So the connection between Dapp and TezBridge are hardcoded.

---

Q: Can DApp spam multiple pop-ups to users browser though the TezBridge plugin?

A: Actually `tezbridge.request` will raise only one window. If the window is opened, it will just focus to it(won't create a new one unless the previous one is closed)

---

Q: Where does TezBridge store the configuration and private keys?

A: TezBridge uses local storage in browser to store the configs and private keys. The private keys are encrypted with the same scheme which official `tezos-client` uses to save encrypted keys in local. So if one can crack the encrypted keys in TezBridge, he can crack the keys generated by the `tezos-client`.

---

Q: Will private key be loaded in memory when the mananger is unlocked?

A: Yes. But the private key will be loaded in memory with a transformed form to prevent memory dump attack.

---

Q: What if the server of TezBridge was attacked by hacker?

A: TezBridge is purely static website hosted in Github page with a cloudflare CDN. So there's no server in TezBridge. All possible network connection targets are listed here:

* Tezos official RPC node
* tzscan.io
* Cloudflare CDN / Github page
* Netlify lambda function (used for simple remote bridging)

--- 

Q: Is a hardware Ledger safe to be used in TezBridge?

A: For a normal operation, Ledger will show a detailed operation information(transaction, origination). For a compound operation, both Ledger and TezBridge will show a base58 hash on each side for user to confirm.


## Contact

Email: im`@`catsigma.com